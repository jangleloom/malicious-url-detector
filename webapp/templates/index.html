<!DOCTYPE html>
<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Mono:ital,wght@0,200..800;1,200..800&family=Press+Start+2P&display=swap" rel="stylesheet">
        <title>Malicious URL Detector</title>
        <style>
            body {
                font-family: 'Press Start 2P', cursive;
                background-color: black;
                color: white;
                text-align: center;
            }

            input::placeholder {
                color: gray;
                opacity: 1;
                font-family: 'Press Start 2P', cursive;
                font-size: 10px;
                text-align: center;
                padding-top: 5px;
            }

            input[type="text"] {
                font-family: 'Press Start 2P', cursive;
                font-size: 10px;
                text-align: center;
                color: darkslategray;
            }

            .submit-button {
                font-family: 'Press Start 2P', cursive;
                font-size: 8px;
                color: white;
                background-color: transparent;
                border-color: white;
                cursor: pointer;
            }

            .result-card {
                background: transparent;
                border: 2px solid white;
                border-radius: 10px;
                max-width: 600px;
                margin: 40px auto;
                padding: 20px;
                box-sizing: border-box;
                overflow: hidden;
            }

            .verdict {
                font-size: 24px;
                font-weight: bold;
                color: white;
                margin-top: 20px;
                margin-bottom: 10px;
            }

            .verdict.high-risk {
                color: rgb(255, 1, 1);
                border-color: rgb(255, 1, 1);
                background: transparent;
            }

            .verdict.suspicious {
                color: rgb(255, 209, 5);
                border-color: rgb(255, 209, 5);
                background: transparent;
            }

            .verdict.low-risk {
                color: rgb(14, 255, 14);
                border-color: rgb(14, 255, 14);
                background: transparent;
            }

            .subheading {
                font-family: "Press Start 2P", cursive;
                font-size: 10px;
                margin-bottom: 20px;
            }

            .subheading.high-risk {
                color: rgb(186, 5, 5);
            }
        
            .subheading.suspicious {
                color: rgb(220, 133, 3);
            }

            .subheading.low-risk {
                color: rgb(3, 161, 3);
            }

            .risk-meter {
                height: 30px;
                width: 80%;
                margin: 0 auto 20px auto;
                align-items: center;
                border: 3px solid white;
                background: transparent;
            }

            .risk-bar {
                height: 100%;
                transition: width 0.5s;
                min-width: 1px;
            }

            .risk-bar.low-risk {
                background:rgb(14, 255, 14)
            }

            .risk-bar.suspicious {
                background: rgb(255, 209, 5);
            }

            .risk-bar.high-risk {
                background: rgb(255, 1, 1);
            }

            .details {
                font-family: "Atkinson Hyperlegible Mono", monospace;
                text-align: left;
                margin: 30px 20px 40px 40px;
                color: white;
                font-size: 14px;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }

            .summary{ 
                font-family: "Atkinson Hyperlegible Mono", monospace;
                font-size: 15px;
                margin: 0 20px 20px 20px;
                text-align: center;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }

            .summary.high-risk {
                color: rgb(255, 1, 1);
            }

            .summary.suspicious {
                color: rgb(255, 209, 5);
            }

            .summary.low-risk {
                color: rgb(14, 255, 14);
            }

        </style>
    </head>
    <body style="background-color:black; text-align:center;">
        <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin: 20px 0;">
            <dotlottie-wc
                src="/static/animation.lottie"
                style="width: 80px; height: 80px;"
                autoplay
                loop>
            </dotlottie-wc>
            <h1 style="color:white; margin: 0;">Malicious URL Detector</h1>
            <dotlottie-wc
                src="/static/animation.lottie"
                style="width: 80px; height: 80px;"
                autoplay
                loop>
            </dotlottie-wc>
        </div>
        <form action="/check" method="post">
            <input type="text" id="url" name="url" placeholder="Enter URL here..." required oninvalid="this.setCustomValidity('Please enter a URL!')" style="width:600px; height:30px; border-radius: 50px;">
            <br><br>
            <input type="submit" class="submit-button" value="Check URL" style="width:100px; height:30px;">
        </form>

        <!-- Display results if available -->
        {% if result %}
        <div class="result-card">
            <div class="verdict {{ result.verdict|lower|replace(' ', '-') }}">
                {{ result.verdict }}
            </div>

            <div class="subheading {{ result.verdict|lower|replace(' ', '-')}}">
                {% if result.verdict == 'HIGH RISK' %}
                    Likely phishing attempt detected!
                {% elif result.verdict == 'SUSPICIOUS' %}
                    Exercise caution!
                {% else %}
                    No obvious indicators detected!
                {% endif %}
            </div>

            <!-- Risk Meter Visualization -->
            <div class="risk-meter">
                <div class="risk-bar {{ result.verdict|lower|replace(' ', '-') }}" style="width: {{ result.risk_score }}%"></div>
            </div>

            <div class="details">
                <p><strong>URL:</strong> {{ result.url }}</p>
                <p><strong>Risk Score:</strong> {{ result.risk_score }}%</p>
                <p><strong>Hostname:</strong> {{ result.hostname }}</p>
                <p><strong>Protection Tier:</strong> {{ result.tier }}</p>
            </div>

            <div class="summary {{ result.verdict|lower|replace(' ', '-') }}">
                {% if result.verdict == 'HIGH RISK' %}
                    <p>This URL strongly matches known malicious or phishing links. 
                        It may attempt to steal credentials or sensitive information. 
                        Visiting or interacting with this site is strongly discouraged! </p>
                {% elif result.verdict == 'SUSPICIOUS' %}
                    <p>This URL contains patterns commonly associated with phishing links. 
                        While this site may be legitimate, extra caution is advised. 
                        Avoid entering sensitive information or credentials unless you are certain of the site's authenticity.</p>
                {% else %}
                    <p>No obvious malicious indicators were detected based on URL structure and known patterns. 
                        This does not guarantee that the site is safe, so remain cautious when sharing sensitive information!</p>
                {% endif %}
            </div>
                

        </div>
    {% endif %}
    
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.11/dist/dotlottie-wc.js" type="module"></script>
    </body>
</html>